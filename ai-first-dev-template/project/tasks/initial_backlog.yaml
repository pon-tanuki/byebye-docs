# 初期バックログ
# Format: TAML (Text-based Application Markup Language)

version: "1.0"
last_updated: "YYYY-MM-DD"

# =============================================================================
# プロダクトバックログ
# =============================================================================

product_backlog:

  # ---------------------------------------------------------------------------
  # Epic 1: 基盤構築
  # ---------------------------------------------------------------------------
  - epic_id: E001
    title: "開発基盤構築"
    description: "プロジェクトの開発環境とCI/CDパイプラインを構築"
    priority: critical
    status: backlog

    stories:
      - story_id: S001
        title: "CI/CDパイプライン構築"
        description: "GitHub ActionsでCI/CDパイプラインを構築する"
        priority: high
        story_points: 8
        status: backlog
        assignee_type: human
        acceptance_criteria:
          - "プッシュ時に自動ビルドが実行される"
          - "テストが自動実行される"
          - "Lintチェックが実行される"
          - "ステージングへの自動デプロイが動作する"
        tasks:
          - "GitHub Actionsワークフロー作成"
          - "ビルドステージ設定"
          - "テストステージ設定"
          - "デプロイステージ設定"

      - story_id: S002
        title: "開発環境構築"
        description: "ローカル開発環境をDocker Composeで構築"
        priority: high
        story_points: 5
        status: backlog
        assignee_type: human
        acceptance_criteria:
          - "docker-compose upで環境が起動する"
          - "ホットリロードが動作する"
          - "データベースが接続可能"
        tasks:
          - "Dockerfile作成"
          - "docker-compose.yml作成"
          - "環境変数テンプレート作成"

      - story_id: S003
        title: "モニタリング基盤構築"
        description: "ログ収集とメトリクス監視の基盤を構築"
        priority: medium
        story_points: 8
        status: backlog
        assignee_type: human
        acceptance_criteria:
          - "ログが集約される"
          - "メトリクスダッシュボードが表示される"
          - "アラートが設定されている"

  # ---------------------------------------------------------------------------
  # Epic 2: 認証・認可
  # ---------------------------------------------------------------------------
  - epic_id: E002
    title: "認証・認可機能"
    description: "ユーザー認証と権限管理機能を実装"
    priority: critical
    status: backlog

    stories:
      - story_id: S010
        title: "ユーザー登録機能"
        description: "メールアドレスとパスワードでユーザー登録"
        priority: high
        story_points: 5
        status: backlog
        assignee_type: ai_agent
        agent_role: developer
        acceptance_criteria:
          - "ユーザーが登録できる"
          - "パスワードがハッシュ化される"
          - "重複メールアドレスがエラーになる"
          - "バリデーションが動作する"

      - story_id: S011
        title: "ログイン機能"
        description: "JWT認証によるログイン機能"
        priority: high
        story_points: 5
        status: backlog
        assignee_type: ai_agent
        agent_role: developer
        acceptance_criteria:
          - "正しい認証情報でログインできる"
          - "JWTトークンが発行される"
          - "不正な認証情報でエラーになる"

      - story_id: S012
        title: "権限管理機能"
        description: "ロールベースのアクセス制御"
        priority: medium
        story_points: 8
        status: backlog
        assignee_type: ai_agent
        agent_role: developer
        acceptance_criteria:
          - "ロールが設定できる"
          - "権限に基づいたアクセス制御が動作する"
          - "不正アクセスが拒否される"

  # ---------------------------------------------------------------------------
  # Epic 3: AIエージェント統合
  # ---------------------------------------------------------------------------
  - epic_id: E003
    title: "AIエージェント統合"
    description: "AIエージェントの基盤とツール連携を構築"
    priority: high
    status: backlog

    stories:
      - story_id: S020
        title: "エージェントオーケストレーター"
        description: "AIエージェントの実行管理基盤を構築"
        priority: high
        story_points: 13
        status: backlog
        assignee_type: human
        acceptance_criteria:
          - "エージェントのタスク割り当てが動作する"
          - "実行状態が追跡できる"
          - "エラー時のリカバリーが動作する"

      - story_id: S021
        title: "Gitツール連携"
        description: "AIエージェントがGit操作を実行できるようにする"
        priority: high
        story_points: 8
        status: backlog
        assignee_type: ai_agent
        agent_role: developer
        acceptance_criteria:
          - "ブランチ作成ができる"
          - "コミットができる"
          - "PR作成ができる"

      - story_id: S022
        title: "テスト実行ツール連携"
        description: "AIエージェントがテストを実行できるようにする"
        priority: medium
        story_points: 5
        status: backlog
        assignee_type: ai_agent
        agent_role: developer
        acceptance_criteria:
          - "テスト実行ができる"
          - "結果が取得できる"
          - "カバレッジが計測できる"

# =============================================================================
# スプリント0 タスク
# =============================================================================

sprint_0:
  goal: "プロジェクト立ち上げと初期設定"
  duration: "1 week"
  status: planned

  tasks:
    - task_id: T001
      title: "リポジトリ初期設定"
      description: "Gitリポジトリの初期設定とブランチ保護"
      priority: high
      status: todo
      assignee_type: human
      estimated_hours: 2
      checklist:
        - "リポジトリ作成"
        - ".gitignore設定"
        - "ブランチ保護ルール設定"
        - "CODEOWNERS設定"

    - task_id: T002
      title: "プロジェクト構造作成"
      description: "ディレクトリ構造とスケルトンコード作成"
      priority: high
      status: todo
      assignee_type: ai_agent
      agent_role: developer
      estimated_hours: 4
      checklist:
        - "ディレクトリ構造作成"
        - "package.json/pyproject.toml設定"
        - "設定ファイルテンプレート"
        - "READMEドラフト"

    - task_id: T003
      title: "Lint/Formatter設定"
      description: "ESLint、Prettier、その他ツールの設定"
      priority: high
      status: todo
      assignee_type: ai_agent
      agent_role: developer
      estimated_hours: 3
      checklist:
        - "ESLint設定"
        - "Prettier設定"
        - "pre-commitフック設定"
        - "editorconfig設定"

    - task_id: T004
      title: "ドキュメントテンプレート整備"
      description: "開発ドキュメントのテンプレートを準備"
      priority: medium
      status: todo
      assignee_type: ai_agent
      agent_role: developer
      estimated_hours: 4
      checklist:
        - "ADRテンプレート"
        - "設計ドキュメントテンプレート"
        - "APIドキュメントテンプレート"
        - "会議メモテンプレート"

    - task_id: T005
      title: "チーム権限設定"
      description: "GitHubチーム権限とアクセス設定"
      priority: medium
      status: todo
      assignee_type: human
      estimated_hours: 1
      checklist:
        - "チーム作成"
        - "権限設定"
        - "招待送付"

    - task_id: T006
      title: "AIエージェント初期設定"
      description: "AIエージェントの認証情報と初期設定"
      priority: high
      status: todo
      assignee_type: human
      estimated_hours: 4
      checklist:
        - "API認証設定"
        - "ツール権限設定"
        - "制約設定"
        - "動作検証"

# =============================================================================
# バックログ優先度定義
# =============================================================================

priority_definitions:
  critical:
    description: "ブロッカー、即時対応必須"
    sla: "24時間以内に着手"
  high:
    description: "重要、早急に対応"
    sla: "1週間以内に着手"
  medium:
    description: "通常優先度"
    sla: "2週間以内に着手"
  low:
    description: "余裕があれば対応"
    sla: "バックログに保持"

# =============================================================================
# ストーリーポイント定義
# =============================================================================

story_points_definition:
  1: "数時間で完了"
  2: "半日程度"
  3: "1日程度"
  5: "2-3日"
  8: "1週間程度"
  13: "2週間程度"
  21: "分割を検討"
