# 禁止行動一覧

## 概要

本ドキュメントはAIエージェントが行ってはいけない行動と、セキュリティ・コンプライアンス方針を定義する。

---

## 絶対禁止事項

### カテゴリ1: データセキュリティ

| ID | 禁止行動 | 理由 | 違反時の対応 |
|----|---------|------|-------------|
| D001 | 機密情報のログ出力 | 情報漏洩 | 即時停止・報告 |
| D002 | 認証情報のハードコーディング | セキュリティリスク | 即時停止・報告 |
| D003 | 個人情報の平文保存 | プライバシー違反 | 即時停止・報告 |
| D004 | 本番データへの直接アクセス | データ保護 | 即時停止・報告 |
| D005 | 暗号化なしの機密データ送信 | 盗聴リスク | 即時停止・報告 |

### カテゴリ2: システム操作

| ID | 禁止行動 | 理由 | 違反時の対応 |
|----|---------|------|-------------|
| S001 | 本番環境への無承認デプロイ | 運用リスク | 即時停止・報告 |
| S002 | システムファイルの変更 | 安定性 | 即時停止・報告 |
| S003 | ルート権限での操作 | セキュリティ | 即時停止・報告 |
| S004 | ファイアウォール設定の変更 | セキュリティ | 即時停止・報告 |
| S005 | 未許可のネットワーク通信 | セキュリティ | 即時停止・報告 |

### カテゴリ3: コード操作

| ID | 禁止行動 | 理由 | 違反時の対応 |
|----|---------|------|-------------|
| C001 | mainブランチへの直接push | コード品質 | ブロック・警告 |
| C002 | force push | 履歴保護 | ブロック・警告 |
| C003 | 未テストコードのコミット | 品質管理 | ブロック・警告 |
| C004 | ライセンス違反コードの使用 | 法的リスク | 即時停止・報告 |
| C005 | 悪意あるコードの生成 | セキュリティ | 即時停止・報告 |

---

## 条件付き禁止事項

### 承認なしでは禁止

| 行動 | 必要な承認 | 承認者 |
|------|-----------|--------|
| 新規依存関係の追加 | セキュリティレビュー | Tech Lead |
| APIエンドポイントの追加 | 設計レビュー | Architect |
| データベーススキーマ変更 | マイグレーションレビュー | DBA |
| 外部サービス連携 | セキュリティ・法務確認 | Security Team |
| 権限変更 | アクセス管理レビュー | Admin |

### 特定条件下でのみ禁止

| 行動 | 禁止条件 | 許可条件 |
|------|---------|---------|
| 大量ファイル変更 | 100ファイル以上 | 分割して実行 |
| 長時間処理 | 30分以上 | 進捗報告付き |
| リトライ処理 | 3回以上失敗 | 人間確認後 |
| 自動修正 | セキュリティ関連 | 人間レビュー後 |

---

## セキュリティポリシー

### 認証・認可

```yaml
authentication:
  - 認証情報はシークレット管理サービスを使用
  - トークンは環境変数から取得
  - セッションは適切にタイムアウト
  - MFAが有効な場合はバイパスしない

authorization:
  - 最小権限の原則を遵守
  - 不必要な権限昇格を行わない
  - 権限変更は監査ログに記録
```

### データ保護

```yaml
data_handling:
  - 機密データは暗号化して保存
  - 転送時は常にTLSを使用
  - ログからPIIを除外またはマスク
  - バックアップは暗号化

data_retention:
  - 不要なデータは速やかに削除
  - 一時ファイルは処理後に削除
  - キャッシュは適切に無効化
```

### ネットワーク

```yaml
network:
  - 許可されたエンドポイントのみ通信
  - 外部APIは認証付きで呼び出し
  - 入力値は常に検証
  - 出力値は適切にエスケープ
```

---

## コンプライアンス方針

### 法的遵守事項

| 規制 | 遵守事項 | 対応 |
|------|---------|------|
| GDPR | 個人データ保護 | データ最小化、同意管理 |
| CCPA | カリフォルニア州プライバシー法 | オプトアウト対応 |
| SOC 2 | セキュリティ管理 | 監査ログ、アクセス制御 |
| HIPAA | 医療情報保護 | 暗号化、アクセス制限 |

### 知的財産

| 項目 | ポリシー |
|------|---------|
| OSS利用 | ライセンス互換性を確認 |
| コード生成 | 著作権に配慮 |
| 学習データ | 権利を確認 |
| 成果物 | 帰属を明確化 |

### 倫理的考慮

| 項目 | 指針 |
|------|------|
| バイアス | 差別的な出力を避ける |
| 透明性 | AIによる生成を明示 |
| 説明責任 | 決定プロセスを記録 |
| 人間の監督 | 重要な決定は人間が行う |

---

## 違反時の対応

### 重大度レベル

| レベル | 定義 | 対応時間 |
|--------|------|---------|
| Critical | システム停止・データ漏洩 | 即時 |
| High | 機能停止・セキュリティリスク | 1時間以内 |
| Medium | 品質低下・軽微なリスク | 4時間以内 |
| Low | 規約違反・警告 | 24時間以内 |

### エスカレーションフロー

```
違反検出
   │
   ▼
重大度判定
   │
   ├── Critical/High
   │      │
   │      ▼
   │   即時停止
   │      │
   │      ▼
   │   セキュリティチームへ通知
   │      │
   │      ▼
   │   インシデント対応開始
   │
   └── Medium/Low
          │
          ▼
       ログ記録
          │
          ▼
       修正対応
          │
          ▼
       レビュー
```

### 報告テンプレート

```markdown
## 違反報告

**日時**: YYYY-MM-DD HH:MM:SS
**重大度**: Critical / High / Medium / Low
**エージェントID**: [agent-id]
**タスクID**: [task-id]

### 違反内容
[何が発生したか]

### 影響範囲
[影響を受けたシステム・データ]

### 原因
[なぜ発生したか]

### 対応
[実施した対応]

### 再発防止
[今後の対策]
```

---

## 例外申請

### 申請手順

1. 例外の必要性を文書化
2. リスク評価を実施
3. 緩和策を提案
4. 承認者のレビュー
5. 期限付きで承認

### 申請テンプレート

```markdown
## 例外申請

**申請日**: YYYY-MM-DD
**申請者**: [担当者]
**対象ルール**: [ルールID]

### 例外の理由
[なぜ例外が必要か]

### リスク評価
[想定されるリスク]

### 緩和策
[リスクを軽減する方法]

### 期間
[例外を適用する期間]

### 承認
- [ ] Tech Lead
- [ ] Security Team
```

---

_最終更新日: YYYY-MM-DD_
_更新者: [担当者/AIエージェント名]_
